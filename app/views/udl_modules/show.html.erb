<% content_for :title, @udl_module.title %>
<%= render 'shared/social_media/facebook_init' %>
<%= render 'shared/social_media/twitter_init' %>

<div id="content-wrapper">
  <div id="single-column-wrapper">
    <div id="content">
  <main>
    <%= render 'udl_modules/partials/header' %>
    <article id="module-content">
      <div id="module-introduction-wrapper">   
        <%= render 'udl_modules/partials/table_of_contents' %>
        <%= render 'udl_modules/partials/page', page: 'introduction' %>       
     </div>
        <%= render 'udl_modules/partials/page', page: 'module-objectives' %>

     <div id="module-objectives" class="module-page">
       <a id="objectives"></a>
       <div class="module-section-header-wrapper">
         <h2>Module Objectives</h2>
         <div class="module-back-to-top-wrapper">
           <%= link_to(
                        fa_icon("arrow-up", text: "Back to top"),
                        udl_module_path(@udl_module, anchor: 'module-top')
               )
           %>
         </div>
       </div>
         <% @udl_module.get_sections_by_page(:module_objectives).each do |section| %>
         <a id="<%= section.slug %>"></a>
         <div class="module-section-title-wrapper" data-no-turbolink>
           <h3>
             <% unless section.hide_title %>
               <%= section.title %> 
             <% end %>
             <% if policy(@udl_module).update? %> 
               <span class="edit-module-section-link"> 
                 <%= link_to(
                       fa_icon( "pencil", text: "Edit this section"), 
                       edit_udl_module_section_path(udl_module_slug: @udl_module.slug, slug: section.slug) 
                     ) %>
               </span>
             <% end %>
           </h3>
         </div>
         <div class="module-section-content-wrapper">
           <%= section.content.html_safe %>
         </div>
       <% end %>
       <% if policy(@udl_module).update? %>
         <p>
           <%= link_to( 
                 fa_icon( "plus", text: "Add a section" ), 
                 new_udl_module_section_path(udl_module_slug: @udl_module.slug, parent: "module_objectives"),
                 id: "udl-module-add-module-objectives-section",
                 class: 'create-module-button'
               ) %>
         </p>
       <% end %>
     </div>

     <div id="udl-module-alignment" class="module-page">
       <a id="udl-alignment"></a>
       <div class="module-section-header-wrapper">
         <h2>UDL Alignment</h2>
         <div class="module-back-to-top-wrapper">
           <%= link_to(
                 fa_icon("arrow-up", text: "Back to top"),
                 udl_module_path(@udl_module, anchor: "module-top")
               )
           %>
         </div>
       </div>
       
       <% @udl_module.get_sections_by_page(:udl_alignment).each do |section| %>
        <a id="<%= section.slug %>"></a>
        <div class="module-section-title-wrapper">
            <h3>
              <% unless section.hide_title %>
                <%= section.title %> 
              <% end %>
              <% if policy(@udl_module).update? %>
              <span class="edit-module-section-link"> 
                <%= link_to(
                      fa_icon( "pencil", text: "Edit this section" ), 
                      edit_udl_module_section_path(udl_module_slug: @udl_module.slug, slug: section.slug)
                    ) %>
              </span>
              <% end %>
            </h3>
          </div>
          <div class="module-section-content-wrapper">
            <%= section.content.html_safe %>
          </div>
       <% end %>
       <% if policy(@udl_module).update? %>
         <p>
           <%= link_to( 
                 fa_icon( "plus", text: "Add a section" ), 
                 new_udl_module_section_path(udl_module_slug: @udl_module.slug, parent: "udl_alignment"),
                 id: "udl-module-add-udl-alignment-section",
                 class: 'create-module-button'
               ) %>
         </p>
       <% end %>
      </div>

      <div id="module-instructional-practice" class="module-page">
       <a id="instructional-practice"></a>
       <div class="module-section-header-wrapper">
         <h2>Instructional Practice</h2>
         <div class="module-back-to-top-wrapper">
           <%= link_to(
                        fa_icon("arrow-up", text: "Back to top"),
                        udl_module_path(@udl_module, anchor: 'module-top')
               )
           %>
         </div>
       </div>
       
       <% @udl_module.get_sections_by_page(:instructional_practice).each do |section| %>
         <a id="<%= section.slug %>"></a>
         <div class="module-section-title-wrapper">
             <h3>
               <% unless section.hide_title %>
                 <%= section.title %>
               <% end %>
               <% if policy(@udl_module).update? %>
               <span class="edit-module-section-link"> 
                 <%= link_to(
                       fa_icon( "pencil", text: "Edit this section" ), 
                       edit_udl_module_section_path(udl_module_slug: @udl_module.slug, slug: section.slug)
                     ) %>
               </span>
               <% end %>
             </h3>
           </div>
         <div class="module-section-content-wrapper">
             <%= section.content.html_safe %>
         </div>       
         <% end %> 
       <% if policy(@udl_module).update? %>
       <p>
         <%= link_to(
               fa_icon( "plus", text: "Add a section" ), 
               new_udl_module_section_path(udl_module_slug: @udl_module.slug, parent: "instructional_practice"),
               id: 'udl-module-add-instructional-practice-section',
               class: 'create-module-button'
             ) %>
       </p>
       <% end %>
     </div>
     <div id="module-learn-more" class="module-page">
       <a id="learn-more"></a>
       <div class="module-section-header-wrapper">
         <h2>Learn More</h2>
         <div class="module-back-to-top-wrapper">
           <%= link_to(
                        fa_icon("arrow-up", text: "Back to top"),
                        udl_module_path(@udl_module, anchor: 'module-top')
               )
           %>
         </div>
       </div>
       
       <% @udl_module.get_sections_by_page(:learn_more).each do |section| %>
         <a id="<%= section.slug %>"></a>
         <div class="module-section-title-wrapper">
             <h3>
               <% unless section.hide_title %>
                 <%= section.title %>
               <% end %>
               <% if policy(@udl_module).update? %>
               <span class="edit-module-section-link"> 
                 <%= link_to(
                       fa_icon( "pencil", text: "Edit this section" ),
                       edit_udl_module_section_path(udl_module_slug: @udl_module.slug, slug: section.slug),
                     ) %>
               </span>
               <% end %>
             </h3>
           </div>
         <div class="module-section-content-wrapper">
             <%= section.content.html_safe %>
         </div>       
       <% end %>
       <% if policy(@udl_module).update? %>
       <p>
         <%= link_to(
               fa_icon( "plus", text: "Add a section" ),
               new_udl_module_section_path(udl_module_slug: @udl_module.slug, parent: "learn_more"),
               id: 'udl-module-add-learn-more-section',
               class: 'create-module-button'
             ) %>
       </p>
       <% end %>
    </div>

    <div id="module-references" class="module-page">
       <a id="references-and-resources"></a>
       <div class="module-section-header-wrapper">
         <h2>References &amp; Resources</h2>
         <div class="module-back-to-top-wrapper">
           <%= link_to(
                        fa_icon("arrow-up", text: "Back to top"),
                        udl_module_path(@udl_module, anchor: 'module-top')
               )
           %>
         </div>
       </div>
       
       <% @udl_module.get_sections_by_page(:references).each do |section| %>
         <a id="<%= section.slug %>"></a>
         <div class="module-section-title-wrapper">
             <h3>
               <% unless section.hide_title %>
                 <%= section.title %>
               <% end %>
               <% if policy(@udl_module).update? %>
               <span class="edit-module-section-link"> 
                 <%= link_to( 
                       fa_icon( 'pencil', text: 'Edit this section' ), 
                       edit_udl_module_section_path(udl_module_slug: @udl_module.slug, slug: section.slug)
                     ) %>
               </span>
               <% end %>
             </h3>
           </div>
         <div class="module-section-content-wrapper">
             <%= section.content.html_safe %>
         </div>       

       <% end %>
       <% if policy(@udl_module).update? %>
       <p>
         <%= link_to(
               fa_icon( 'plus', text: 'Add a section' ),
               new_udl_module_section_path(udl_module_slug: @udl_module.slug, parent: 'references'),
               id: 'udl-module-add-references-section',
               class: 'create-module-button'
             ) %>
       </p>
       <% end %>
    </div>       

    <div id="module-references" class="module-page">
       <a id="about-the-author"></a>
       <div class="module-section-header-wrapper">
         <h2>About the Author</h2>
         <div class="module-back-to-top-wrapper">
           <%= link_to(
                        fa_icon("arrow-up", text: "Back to top"),
                        udl_module_path(@udl_module, anchor: 'module-top')
               )
           %>
         </div>
       </div>


    <% @udl_module.get_sections_by_page(:about_the_author).each do |section| %>
         <a id="<%= section.slug %>"></a>
         <div class="module-section-title-wrapper">
             <h3>
               <% unless section.hide_title %>
                 <%= section.title %>
               <% end %>
               <% if policy(@udl_module).update? %>
               <span class="edit-module-section-link"> 
                 <%= link_to( 
                       fa_icon( 'pencil', text: 'Edit this section' ), 
                       edit_udl_module_section_path(udl_module_slug: @udl_module.slug, slug: section.slug)
                     ) %>
               </span>
               <% end %>
             </h3>
           </div>
         <div class="module-section-content-wrapper">
             <%= section.content.html_safe %>
         </div>       

       <% end %>
       <% if policy(@udl_module).update? %>
       <p>
         <%= link_to(
               fa_icon( 'plus', text: 'Add a section' ),
               new_udl_module_section_path(udl_module_slug: @udl_module.slug, parent: 'about_the_author'),
               id: 'udl-module-add-about-the-author-section',
               class: 'create-module-button'
             ) %>
       </p>
       <% end %>
    </div>


    <div id="module-footer-info">
      <p>
        <strong>Latest revision date:</strong>
        <%= @udl_module.latest_revision_date %>
      </p>
    </div>
        </article>
      </main>
    </div>
  </div>
</div>
